<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Speech Bubbles &mdash; Ren&#39;Py Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=c659a740" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/general.css?v=c0a7eb24" />
      <link rel="stylesheet" type="text/css" href="_static/dark_mode_css/dark.css?v=70edf1c7" />

  
    <link rel="canonical" href="https://www.renpy.org/doc/html/bubble.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=986d2f06"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/dark_mode_js/default_light.js?v=c2e647ce"></script>
        <script src="_static/dark_mode_js/theme_switcher.js?v=358d3910"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Text Input" href="input.html" />
    <link rel="prev" title="NVL-Mode Tutorial" href="nvl_mode.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

<a href="https://www.renpy.org/" style="margin-bottom: 0">Ren'Py Visual Novel Engine
<img src="_static/navbar-logo.png" alt="Logo" style="width: 93px; height: 100px; border-radius: 0; margin: 0 auto; padding: 0; margin-top: 5px; background-color: unset;" />
</a>

<a href="index.html" style="margin-bottom: 0px">8.3.4 Documentation</a>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI Customization Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The Ren'Py Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="language_basics.html">Language Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="label.html">Labels &amp; Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogue.html">Dialogue and Narration</a></li>
<li class="toctree-l1"><a class="reference internal" href="displaying_images.html">Displaying Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="menus.html">In-Game Menus</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">Python Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="conditional.html">Conditional Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio.html">Audio</a></li>
<li class="toctree-l1"><a class="reference internal" href="audio_filters.html">Audio Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="movie.html">Movie</a></li>
<li class="toctree-l1"><a class="reference internal" href="voice.html">Voice</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Text, Displayables, Transforms, and Transitions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="text.html">Text</a></li>
<li class="toctree-l1"><a class="reference internal" href="translation.html">Translation</a></li>
<li class="toctree-l1"><a class="reference internal" href="displayables.html">Displayables</a></li>
<li class="toctree-l1"><a class="reference internal" href="transforms.html">Transforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="transform_properties.html">Transform Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="transitions.html">Transitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrixcolor.html">Matrixcolor</a></li>
<li class="toctree-l1"><a class="reference internal" href="layeredimage.html">Layered Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="3dstage.html">3D Stage</a></li>
<li class="toctree-l1"><a class="reference internal" href="live2d.html">Live2D Cubism</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Customizing Ren'Py</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="style.html">Styles</a></li>
<li class="toctree-l1"><a class="reference internal" href="style_properties.html">Style Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="screens.html">Screens and Screen Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_actions.html">Screen Actions, Values, and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_special.html">Special Screen Names</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_optimization.html">Screen Language Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="preferences.html">Preference Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="store_variables.html">Store Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="mouse.html">Custom Mouse Cursors</a></li>
<li class="toctree-l1"><a class="reference internal" href="textshaders.html">Text Shaders</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="launcher.html">Launcher</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_tools.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="director.html">Interactive Director</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Functionality</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="nvl_mode.html">NVL-Mode Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Speech Bubbles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#retained-bubbles">Retained Bubbles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tips">Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-variables">Configuration Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bubble-screen">Bubble Screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-bubble-support-to-a-game">Adding Bubble Support to a Game</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Text Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="side_image.html">Side Images</a></li>
<li class="toctree-l1"><a class="reference internal" href="rooms.html">Image Gallery, Music Room, and Replay Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="drag_drop.html">Drag and Drop</a></li>
<li class="toctree-l1"><a class="reference internal" href="sprites.html">Sprites</a></li>
<li class="toctree-l1"><a class="reference internal" href="keymap.html">Customizing the Keymap</a></li>
<li class="toctree-l1"><a class="reference internal" href="achievement.html">Achievements</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">Dialogue History</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple.html">Multiple Character Dialogue</a></li>
<li class="toctree-l1"><a class="reference internal" href="splashscreen_presplash.html">Splashscreen and Presplash</a></li>
<li class="toctree-l1"><a class="reference internal" href="lifecycle.html">Lifecycle of a Ren'Py game</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python and Ren'Py</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="statement_equivalents.html">Statement Equivalents</a></li>
<li class="toctree-l1"><a class="reference internal" href="save_load_rollback.html">Saving, Loading, and Rollback</a></li>
<li class="toctree-l1"><a class="reference internal" href="persistent.html">Persistent Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui_advanced.html">Advanced GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="screen_python.html">Screens and Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdd.html">Creator-Defined Displayables</a></li>
<li class="toctree-l1"><a class="reference internal" href="cds.html">Creator-Defined Statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_text_tags.html">Custom Text Tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="character_callbacks.html">Character Callbacks</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_python.html">File Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="color_class.html">Color Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix.html">Matrix</a></li>
<li class="toctree-l1"><a class="reference internal" href="model.html">Model-Based Rendering</a></li>
<li class="toctree-l1"><a class="reference internal" href="other.html">Other Functions and Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="ren_py.html">_ren.py Files - Ren'Py in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="fetch.html">HTTPS/HTTP Fetch</a></li>
<li class="toctree-l1"><a class="reference internal" href="screenshot.html">Screenshots</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Building, Updating, and Other Platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build.html">Building Distributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="android.html">Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="ios.html">iOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">Web / HTML5</a></li>
<li class="toctree-l1"><a class="reference internal" href="chromeos.html">Chrome OS/Chromebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="raspi.html">Raspberry Pi</a></li>
<li class="toctree-l1"><a class="reference internal" href="iap.html">In-App Purchasing</a></li>
<li class="toctree-l1"><a class="reference internal" href="updater.html">HTTPS/HTTP Updater</a></li>
<li class="toctree-l1"><a class="reference internal" href="downloader.html">Downloader for Large Games on Mobile</a></li>
<li class="toctree-l1"><a class="reference internal" href="gesture.html">Gestures</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">End-User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="problems.html">Dealing with Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment_variables.html">Environment Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="self_voicing.html">Self-Voicing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Library and Tool Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="template_projects.html">Template Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Engine Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="editor.html">Text Editor Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="skins.html">Skins</a></li>
<li class="toctree-l1"><a class="reference internal" href="translating_renpy.html">Translating Ren'Py</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changes, License, and Credits</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog (Ren'Py 7.x-)</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog6.html">Changelog (Ren'Py 6.11 - 6.99)</a></li>
<li class="toctree-l1"><a class="reference internal" href="incompatible.html">Incompatible Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponsors.html">Ren'Py Development Sponsors</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Ren'Py Visual Novel Engine</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Speech Bubbles</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/renpy/renpy/blob/master/sphinx/source/bubble.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="speech-bubbles">
<h1>Speech Bubbles<a class="headerlink" href="#speech-bubbles" title="Link to this heading"></a></h1>
<p>Ren'Py supports dialogue that's displayed in speech bubbles, which can be
interactively positioned on the screen. This provides an alternative to
the textboxes used by ADV-style games, and the full screen dialogue used
by NVL-mode.</p>
<p>To use speech bubbles your game, you'll have to define Characters with
an image tag, a kind of <code class="docutils literal notranslate"><span class="pre">bubble</span></code>. For example,</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">e</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="k">image</span><span class="o">=</span><span class="s2">&quot;eileen&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">bubble</span><span class="p">)</span> <span class="c1"># Eileen</span>
<span class="k">define</span> <span class="n">l</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="k">image</span><span class="o">=</span><span class="s2">&quot;lucy&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">bubble</span><span class="p">)</span>   <span class="c1"># Lucy</span>
</pre></div>
</div>
<p>While a name is supported, in general the speaking character will be
implied by the tails of the bubble, so the name can be omitted.</p>
<p>You may then use these characters to write dialogue normally.</p>
<p>To position the balloons, hit shift+B to display the speech bubble editor.
For each character that has a speech balloon, this will have two buttons
in it.</p>
<p>Pressing the area button will launch the speech bubble editor. This editor
lets you drag to select the area where the speech bubble will be placed,
on a grid. When you complete the drag, the speech bubble will will change
locations.</p>
<p>Pressing the properties buttons will select between sets of properties
associated with the speech bubble. For the default speech bubble, the
different properties control the position of the speech bubble tail.</p>
<p>Once you've changed the area or properties for a character (or group of
characters with the same image tags), those properties remain set until
changed again, or until the next scene statement.</p>
<p>When the area or properties are being set on the current line of dialogue,
the corresponding line is brighter. If the values are being inherited from
a prior line of dialogue or the default, the button is dimmed out. Right
clicking on a button will prevent the current line from setting the value.</p>
<section id="retained-bubbles">
<span id="id1"></span><h2>Retained Bubbles<a class="headerlink" href="#retained-bubbles" title="Link to this heading"></a></h2>
<p>Ren'Py supports a mode in which bubbles are retained between lines of
dialogue, so they pop up one by one, until the previous bubbles are
cleared from the screen. To enable this mode, set a bubble character's
<cite>retain</cite> property to True:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">e</span> <span class="o">=</span> <span class="n">Character</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="k">image</span><span class="o">=</span><span class="s2">&quot;eileen&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="n">bubble</span><span class="p">,</span> <span class="n">retain</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Once that's done, the bubbles will keep popping up. Each bubble will
need to be placed individually, so bubbles don't overlap. In the bubble editor,
pressing the &quot;(clear retained bubbles)&quot; button will remove all of the
retained bubbles from the screen, except for the most recent.</p>
</section>
<section id="tips">
<h2>Tips<a class="headerlink" href="#tips" title="Link to this heading"></a></h2>
<p>The speech bubbles use the same identifiers used by the translation system,
see the <a class="reference internal" href="translation.html#translation-tips"><span class="std std-ref">Translation Tips</span></a> for more information
about them. These identifiers can change if:</p>
<ul class="simple">
<li><p>The text of a line changes.</p></li>
<li><p>Another line with the same text inside the same label is added or removed.</p></li>
<li><p>A label before the line is added or removed (however, adding or removing
a label with the <code class="docutils literal notranslate"><span class="pre">hide</span></code> clause will not change the translation identifier).</p></li>
</ul>
<p>If you edit a scene, it's suggested that you replay through it to make sure
the changes did not affect speech bubble placement.</p>
<p>It's possible to apply transforms to the speech bubble by editing the <a class="reference internal" href="#bubble-screen"><span class="std std-ref">Bubble Screen</span></a>.</p>
</section>
<section id="configuration-variables">
<h2>Configuration Variables<a class="headerlink" href="#configuration-variables" title="Link to this heading"></a></h2>
<p>The speech bubble system is controlled by variables in the <code class="docutils literal notranslate"><span class="pre">bubble</span></code> namespace,
and by the <code class="docutils literal notranslate"><span class="pre">bubble</span></code> screen and its associated styles.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">bubble</span></code> namespace contains the following variables:</p>
<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.db_filename">
<span class="sig-name descname"><span class="pre">bubble.db_filename</span></span> <span class="pre">=</span> <span class="pre">&quot;bubble.json&quot;</span><a class="headerlink" href="#var-bubble.db_filename" title="Link to this definition"></a></dt>
<dd><p>The database file, stored in the game directory, that contains the
speech bubble information.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.clear_retain_statements">
<span class="sig-name descname"><span class="pre">bubble.clear_retain_statements</span></span> <span class="pre">=</span> <span class="pre">[</span> <span class="pre">&quot;call</span> <span class="pre">screen&quot;,</span> <span class="pre">&quot;menu&quot;,</span>&#160; <span class="pre">&quot;say&quot;,</span> <span class="pre">&quot;say-centered&quot;,</span> <span class="pre">&quot;say-nvl&quot;,</span> <span class="pre">&quot;scene&quot;,</span> <span class="pre">]</span><a class="headerlink" href="#var-bubble.clear_retain_statements" title="Link to this definition"></a></dt>
<dd><p>This is a list of statements that will automatically cause retained bubbles to be cleared.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.cols">
<span class="sig-name descname"><span class="pre">bubble.cols</span></span> <span class="pre">=</span> <span class="pre">24</span><a class="headerlink" href="#var-bubble.cols" title="Link to this definition"></a></dt>
<dd><p>The granularity of the grid that's used to position and size speech bubbles,
in the horizontal direction.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.default_area">
<span class="sig-name descname"><span class="pre">bubble.default_area</span></span> <span class="pre">=</span> <span class="pre">(15,</span> <span class="pre">1,</span> <span class="pre">8,</span> <span class="pre">5)</span><a class="headerlink" href="#var-bubble.default_area" title="Link to this definition"></a></dt>
<dd><p>This is the default area that speech bubbles are placed in, if no other
area is specified. This is a tuple of the form (x, y, w, h),
where each value is a number of grid cells.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.expand_area">
<span class="sig-name descname"><span class="pre">bubble.expand_area</span></span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span><a class="headerlink" href="#var-bubble.expand_area" title="Link to this definition"></a></dt>
<dd><p>This is a map from the name of a set of properties to a (left, top, right, bottom)
tuple. If found in this set, the area of the speech bubble is expanded by the
given number of pixels.</p>
<p>This makes the speech bubble bigger than the area the creator dragged out.
The intent is that this can be used to drag out the body of the speech
bubble without concern for the tail, and also for the text itself to stay
put when the set of properties is changed and the tail moves.</p>
<p>By default, this is:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="n">expand_area</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;bottom_left&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>
    <span class="s2">&quot;bottom_right&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>
    <span class="s2">&quot;top_left&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;top_right&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.layer">
<span class="sig-name descname"><span class="pre">bubble.layer</span></span> <span class="pre">=</span> <span class="pre">&quot;screens&quot;</span><a class="headerlink" href="#var-bubble.layer" title="Link to this definition"></a></dt>
<dd><p>The layer that non-retained bubbles are placed on.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.properties">
<span class="sig-name descname"><span class="pre">bubble.properties</span></span> <span class="pre">=</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span><a class="headerlink" href="#var-bubble.properties" title="Link to this definition"></a></dt>
<dd><p>These are properties, apart from the area, that can be used to customize
the speech bubble. This is a map from the name of a set of properties
to a dictionary of properties and values. These properties supersede those
given to the character, and are then supplied to the <code class="docutils literal notranslate"><span class="pre">bubble</span></code> screen.</p>
<p>This uses the same prefixing system as <a class="reference internal" href="dialogue.html#Character" title="Character"><code class="xref py py-func docutils literal notranslate"><span class="pre">Character()</span></code></a> does. Properties
beginning with <code class="docutils literal notranslate"><span class="pre">window_</span></code> have the prefix removed, and are passed to the
displayable with id &quot;window&quot; in the bubble screen, which is the bubble
itself. Properties with <code class="docutils literal notranslate"><span class="pre">what_</span></code> have the prefix removed, and are passed
to the displayable with id &quot;what&quot; in the bubble screen, which is the text
of the bubble. Properties with <code class="docutils literal notranslate"><span class="pre">who_</span></code> are handled similarly, and given
to the characters name. Properties with <code class="docutils literal notranslate"><span class="pre">show_</span></code> are given as arguments
to the bubble screen itself.</p>
<p>In a new game, screens.rpy includes:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="k">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="s2">&quot;gui/bubble.png&quot;</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

<span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="na">properties</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;bottom_left&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_bottom_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;bottom_right&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_bottom_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;top_left&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_top_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;top_right&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_top_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The bubble.frame variable is just used to make defining bubble.properties
easier. Then for each of the four styles of bubble, the bubble is flipped
so the tail is in the right place, and the padding is adjusted to leave
room for the tail.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.properties_order">
<span class="sig-name descname"><span class="pre">bubble.properties_order</span></span> <span class="pre">=</span> <span class="pre">[</span> <span class="pre">]</span><a class="headerlink" href="#var-bubble.properties_order" title="Link to this definition"></a></dt>
<dd><p>This is a list of the names of the sets of properties, in the order they should
be cycled through in the speech bubble editor. If the names of the sets of properties
are not given, the properties are cycled through in alphabetical order.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.properties_callback">
<span class="sig-name descname"><span class="pre">bubble.properties_callback</span></span> <span class="pre">=</span> <span class="pre">None</span><a class="headerlink" href="#var-bubble.properties_callback" title="Link to this definition"></a></dt>
<dd><p>If not None, this should be a function that takes an image tag, and returns
a list or tuple of property names that should be used for that image tag, in
the order those names should be cycled through. This takes precedence over
bubble.properties_order, and can be used to customize the list of bubble
properties by character.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.retain_layer">
<span class="sig-name descname"><span class="pre">bubble.retain_layer</span></span> <span class="pre">=</span> <span class="pre">&quot;screens&quot;</span><a class="headerlink" href="#var-bubble.retain_layer" title="Link to this definition"></a></dt>
<dd><p>The layer that retained bubbles are placed on.</p>
</dd></dl>

<dl class="std var">
<dt class="sig sig-object std" id="var-bubble.rows">
<span class="sig-name descname"><span class="pre">bubble.rows</span></span> <span class="pre">=</span> <span class="pre">24</span><a class="headerlink" href="#var-bubble.rows" title="Link to this definition"></a></dt>
<dd><p>The granularity of the grid that's used to position and size speech bubbles,
in the vertical direction.</p>
</dd></dl>

</section>
<section id="bubble-screen">
<span id="id2"></span><h2>Bubble Screen<a class="headerlink" href="#bubble-screen" title="Link to this heading"></a></h2>
<p>The default <code class="docutils literal notranslate"><span class="pre">bubble</span></code> screen can be found in <code class="docutils literal notranslate"><span class="pre">screens.rpy</span></code>, and is similar
to the default <code class="docutils literal notranslate"><span class="pre">say</span></code> screen:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">screen</span> <span class="n">bubble</span><span class="p">(</span><span class="n">who</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
    <span class="na">style_prefix</span> <span class="s2">&quot;bubble&quot;</span>

    <span class="k">window</span><span class="p">:</span>
        <span class="na">id</span> <span class="s2">&quot;window&quot;</span>

        <span class="k">if</span> <span class="n">who</span> <span class="k">is</span> <span class="k">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">window</span><span class="p">:</span>
                <span class="na">id</span> <span class="s2">&quot;namebox&quot;</span>
                <span class="k">style</span> <span class="s2">&quot;bubble_namebox&quot;</span>

                <span class="k">text</span> <span class="n">who</span><span class="p">:</span>
                    <span class="na">id</span> <span class="s2">&quot;who&quot;</span>

        <span class="k">text</span> <span class="n">what</span><span class="p">:</span>
            <span class="na">id</span> <span class="s2">&quot;what&quot;</span>
</pre></div>
</div>
<p>It's separate from the say screen as it uses its own set of styles, including
<code class="docutils literal notranslate"><span class="pre">bubble_window</span></code>, <code class="docutils literal notranslate"><span class="pre">bubble_what</span></code>, <code class="docutils literal notranslate"><span class="pre">bubble_namebox</span></code>, and <code class="docutils literal notranslate"><span class="pre">bubble_who</span></code>.
These styles can be customized directly to avoid having to set a property
in all of the sets of properties in <a class="reference internal" href="#var-bubble.properties"><code class="xref std std-var docutils literal notranslate"><span class="pre">bubble.properties</span></code></a>.</p>
<p>If you'd like to apply effects to the speech bubble, you can do so by
adding a transform to the bubble screen that accepts the show and hide
transform events, like:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="k">screen</span> <span class="n">bubble</span><span class="p">(</span><span class="n">who</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
    <span class="na">style_prefix</span> <span class="s2">&quot;bubble&quot;</span>

    <span class="k">window</span><span class="p">:</span>
        <span class="na">id</span> <span class="s2">&quot;window&quot;</span>

        <span class="k">at</span> <span class="k">transform</span><span class="p">:</span>
            <span class="k">on</span> <span class="k">show</span><span class="p">:</span>
                <span class="na">alpha</span> <span class="mf">0.0</span>
                <span class="n">linear</span> <span class="mf">.5</span> <span class="na">alpha</span> <span class="mf">1.0</span>

            <span class="k">on</span> <span class="k">hide</span><span class="p">:</span>
                <span class="n">linear</span> <span class="mf">.5</span> <span class="na">alpha</span> <span class="mf">0.0</span>

        <span class="k">if</span> <span class="n">who</span> <span class="k">is</span> <span class="k">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">window</span><span class="p">:</span>
                <span class="na">id</span> <span class="s2">&quot;namebox&quot;</span>
                <span class="k">style</span> <span class="s2">&quot;bubble_namebox&quot;</span>

                <span class="k">text</span> <span class="n">who</span><span class="p">:</span>
                    <span class="na">id</span> <span class="s2">&quot;who&quot;</span>

        <span class="k">text</span> <span class="n">what</span><span class="p">:</span>
            <span class="na">id</span> <span class="s2">&quot;what&quot;</span>
</pre></div>
</div>
</section>
<section id="adding-bubble-support-to-a-game">
<h2>Adding Bubble Support to a Game<a class="headerlink" href="#adding-bubble-support-to-a-game" title="Link to this heading"></a></h2>
<p>Games made before the release of Ren'Py 8.1 won't include the default screens
and settings required for the speech bubble system. There are two things you
need to do to fix this. First, download:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://raw.githubusercontent.com/renpy/renpy/master/gui/game/gui/bubble.png">https://raw.githubusercontent.com/renpy/renpy/master/gui/game/gui/bubble.png</a></p></li>
<li><p><a class="reference external" href="https://raw.githubusercontent.com/renpy/renpy/master/gui/game/gui/thoughtbubble.png">https://raw.githubusercontent.com/renpy/renpy/master/gui/game/gui/thoughtbubble.png</a></p></li>
</ul>
<p>And place the files in the <code class="docutils literal notranslate"><span class="pre">game/gui</span></code> directory of your game. Then, add this to
the end of screens.rpy:</p>
<div class="highlight-renpy notranslate"><div class="highlight"><pre><span></span><span class="c1">## Bubble screen ###############################################################</span>
<span class="c1">##</span>
<span class="c1">## The bubble screen is used to display dialogue to the player when using</span>
<span class="c1">## speech bubbles. The bubble screen takes the same parameters as the say</span>
<span class="c1">## screen, must create a displayable with the id of &quot;what&quot;, and can create</span>
<span class="c1">## displayables with the &quot;namebox&quot;, &quot;who&quot;, and &quot;window&quot; ids.</span>
<span class="c1">##</span>
<span class="c1">## https://www.renpy.org/doc/html/bubble.html#bubble-screen</span>

<span class="k">screen</span> <span class="n">bubble</span><span class="p">(</span><span class="n">who</span><span class="p">,</span> <span class="n">what</span><span class="p">):</span>
    <span class="na">style_prefix</span> <span class="s2">&quot;bubble&quot;</span>

    <span class="k">window</span><span class="p">:</span>
        <span class="na">id</span> <span class="s2">&quot;window&quot;</span>

        <span class="k">if</span> <span class="n">who</span> <span class="k">is</span> <span class="k">not</span> <span class="kc">None</span><span class="p">:</span>

            <span class="k">window</span><span class="p">:</span>
                <span class="na">id</span> <span class="s2">&quot;namebox&quot;</span>
                <span class="k">style</span> <span class="s2">&quot;bubble_namebox&quot;</span>

                <span class="k">text</span> <span class="n">who</span><span class="p">:</span>
                    <span class="na">id</span> <span class="s2">&quot;who&quot;</span>

        <span class="k">text</span> <span class="n">what</span><span class="p">:</span>
            <span class="na">id</span> <span class="s2">&quot;what&quot;</span>

<span class="k">style</span> <span class="n">bubble_window</span> <span class="k">is</span> <span class="n">empty</span>
<span class="k">style</span> <span class="n">bubble_namebox</span> <span class="k">is</span> <span class="n">empty</span>
<span class="k">style</span> <span class="n">bubble_who</span> <span class="k">is</span> <span class="k">default</span>
<span class="k">style</span> <span class="n">bubble_what</span> <span class="k">is</span> <span class="k">default</span>

<span class="k">style</span> <span class="n">bubble_window</span><span class="p">:</span>
    <span class="na">xpadding</span> <span class="mi">30</span>
    <span class="na">top_padding</span> <span class="mi">5</span>
    <span class="na">bottom_padding</span> <span class="mi">5</span>

<span class="k">style</span> <span class="n">bubble_namebox</span><span class="p">:</span>
    <span class="na">xalign</span> <span class="mf">0.5</span>

<span class="k">style</span> <span class="n">bubble_who</span><span class="p">:</span>
    <span class="na">xalign</span> <span class="mf">0.5</span>
    <span class="na">textalign</span> <span class="mf">0.5</span>
    <span class="na">color</span> <span class="s2">&quot;#000&quot;</span>

<span class="k">style</span> <span class="n">bubble_what</span><span class="p">:</span>
    <span class="na">align</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
    <span class="na">text_align</span> <span class="mf">0.5</span>
    <span class="na">layout</span> <span class="s2">&quot;subtitle&quot;</span>
    <span class="na">color</span> <span class="s2">&quot;#000&quot;</span>

<span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="k">frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="s2">&quot;gui/bubble.png&quot;</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>
<span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="n">thoughtframe</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="s2">&quot;gui/thoughtbubble.png&quot;</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">55</span><span class="p">)</span>

<span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="na">properties</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;bottom_left&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_bottom_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;bottom_right&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_bottom_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;top_left&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_top_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;top_right&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">Transform</span><span class="p">(</span><span class="n">bubble</span><span class="o">.</span><span class="k">frame</span><span class="p">,</span> <span class="na">xzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="na">yzoom</span><span class="o">=-</span><span class="mi">1</span><span class="p">),</span>
        <span class="s2">&quot;window_top_padding&quot;</span> <span class="p">:</span> <span class="mi">27</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="s2">&quot;thought&quot;</span> <span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;window_background&quot;</span> <span class="p">:</span> <span class="n">bubble</span><span class="o">.</span><span class="n">thoughtframe</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">define</span> <span class="n">bubble</span><span class="o">.</span><span class="n">expand_area</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;bottom_left&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>
    <span class="s2">&quot;bottom_right&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span>
    <span class="s2">&quot;top_left&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;top_right&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="s2">&quot;thought&quot;</span> <span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nvl_mode.html" class="btn btn-neutral float-left" title="NVL-Mode Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="input.html" class="btn btn-neutral float-right" title="Text Input" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>